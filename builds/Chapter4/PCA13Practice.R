library(tidyverse)

setwd("../../mlba/mlba/data-raw")
cereals.df <- read.csv("Cereals.csv.gz") %>%
    column_to_rownames("name") %>% 
    select(-c(mfr, type)) %>%
    drop_na()

# head(cereals.df, 5)

#                        name mfr type calories protein fat sodium fiber carbo
# 1                 100%_Bran   N    C       70       4   1    130    10     5
# 2         100%_Natural_Bran   Q    C      120       3   5     15     2     8
# 3                  All-Bran   K    C       70       4   1    260     9     7
# 4 All-Bran_with_Extra_Fiber   K    C       50       4   0    140    14     8
# 5            Almond_Delight   R    C      110       2   2    200     1    14
#   sugars potass vitamins shelf weight cups   rating
# 1      6    280       25     3      1 0.33 68.40297
# 2      8    135        0     3      1 1.00 33.98368
# 3      5    320       25     3      1 0.33 59.42551
# 4      0    330       25     3      1 0.50 93.70491

pcs <- prcomp(cereals.df)
summary(pcs)
pcs$rotation[,1:5]

### OUTPUT

# Importance of components:
#                            PC1     PC2      PC3      PC4     PC5     PC6
# Standard deviation     83.7641 70.9143 22.64375 19.18148 8.42323 2.09167
# Proportion of Variance  0.5395  0.3867  0.03943  0.02829 0.00546 0.00034
# Cumulative Proportion   0.5395  0.9262  0.96560  0.99389 0.99935 0.99968
#                            PC7     PC8     PC9    PC10   PC11    PC12      PC13
# Standard deviation     1.69942 0.77963 0.65783 0.37043 0.1864 0.06302 5.334e-08
# Proportion of Variance 0.00022 0.00005 0.00003 0.00001 0.0000 0.00000 0.000e+00
# Cumulative Proportion  0.99991 0.99995 0.99999 1.00000 1.0000 1.00000 1.000e+00
#                    PC1           PC2           PC3           PC4          PC5
# calories  0.0779841812  0.0093115874 -0.6292057595 -0.6010214629  0.454958508
# protein  -0.0007567806 -0.0088010282 -0.0010261160  0.0031999095  0.056175970
# fat      -0.0001017834 -0.0026991522 -0.0161957859 -0.0252622140 -0.016098458
# sodium    0.9802145422 -0.1408957901  0.1359018583 -0.0009680741  0.013948118
# fiber    -0.0054127550 -0.0306807512  0.0181910456  0.0204721894  0.013605026
# carbo     0.0172462607  0.0167832981 -0.0173699816  0.0259482087  0.349266966
# sugars    0.0029888631  0.0002534853 -0.0977049979 -0.1154809105 -0.299066459
# potass   -0.1349000039 -0.9865619808 -0.0367824989 -0.0421757390 -0.047150529
# vitamins  0.0942933187 -0.0167288404 -0.6919777623  0.7141179984 -0.037008623
# shelf    -0.0015414195 -0.0043603994 -0.0124888415  0.0056471836 -0.007876459
# weight    0.0005120017 -0.0009992138 -0.0038059565 -0.0025464145  0.003022113
# cups      0.0005101111  0.0015910125 -0.0006943214  0.0009853800  0.002148458
# rating   -0.0752962922 -0.0717421528  0.3079471212  0.3345338994  0.757708025